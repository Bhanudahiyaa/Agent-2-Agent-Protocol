import { A2AApplication } from "./app.js";
/**
 * A2A Server
 */
export class A2AServer {
    /**
     * Create a new A2AServer
     *
     * @param agentCard - Agent card
     * @param requestHandler - Request handler
     */
    constructor(agentCard, requestHandler) {
        this.agentCard = agentCard;
        this.requestHandler = requestHandler;
    }
    /**
     * Get the Express application
     *
     * @returns Express application
     */
    app() {
        return new A2AApplication(this.agentCard, this.requestHandler).build();
    }
    /**
     * Start the server
     *
     * @param options - Server options
     */
    start(options = {}) {
        const host = options.host || "0.0.0.0";
        const port = options.port || 3000;
        const app = this.app();
        const server = app.listen(port, host, () => {
            console.log(`A2A Server running at http://${host}:${port}`);
        });
        // Handle graceful shutdown
        process.on("SIGINT", () => {
            console.log("Shutting down A2A server...");
            server.close(() => {
                console.log("A2A server closed");
                process.exit(0);
            });
        });
    }
}
//# sourceMappingURL=index.js.map